# 第五章: 字符串 #
字符串是Java程序中经常处理的对象，如果字符串运用的不好，将影响到程序运行的效率。在Java中字符串作为String类的实例来处理。以对象的方式处理字符串，将使字符串更加灵活、方便。了解字符串上可用的操作，可以节省程序编写与维护的时间。

## 本章目标：
- 掌握字符串的创建方式
- 理解字符串的连接的方式
- 掌握获取字符串信息的方式
- 掌握字符串的常用操作
- 掌握字符串的格式化
- 理解正则表达式
- 掌握字符串生成器的用法

## 一、String类 ##
字符串广泛应用在Java编程中，在Java中字符串属于对象，Java提供了String类来创建和操作字符串。

### 创建字符串 ###
创建字符串最简单的方式如下：

	String greeting = "菜鸟教程";
	
在代码中遇到字符串常量时，这里的值是"菜鸟教程"，编译器会使用该值创建一个String对象。

和其他对象一样，可以使用关键字和构造方法来创建 String 对象。

String 类有11种构造方法，这些方法提供不同的参数来初始化字符串，比如提供一个字符数组参数：

例子：

	/**
	 * 创建字符串
	 * @param args
	 */
	public static void main(String[] args) {
		char[] helloArray = { 'h', 'e', 'l', 'l', 'o' };
		String helloString = new String(helloArray);
		System.out.println(helloString);
	}

> 注意：String类是不可改变的，所以你一但创建了String对象，那它的值就无法改变了。

如果需要对字符串做很多修改，那么应该选择使用 StringBuffer & StringBuilder 类。

## 二、连接字符串 ##
String类提供了连接两个字符串的方法：

	String1.concat(string2);
	
返回 string2 连接 string1 的新字符串。也可以对字符串常量使用 concat() 方法，如：

	"我的名字是".concat("Tony");
	
更常用的是使用'+'操作符来连接字符串，如：

	"Hello," + " Tony" + "!"
	
下面是一个例子：

	/**
	 * 连接字符串
	 * @param args
	 */
	public static void main(String[] args) {
		String str1 = "百度是最大的中文搜索引擎";
		System.out.println(str1.concat(",它的网址是：www.baidu.com"));
		System.out.println(str1 + "www.baidu.com");
	}

## 三、获取字符串信息 ##
用于获取有关对象的信息的方法称为访问器方法。

String类的一个访问器方法是 length() 方法，它返回字符串对象包含的字符数。

例子：

	/**
	 * 获取字符串长度
	 * @param args
	 */
	public static void main(String[] args) {
		String site = "www.baidu.com";
		int len = site.length();
		System.out.println(len);
	}

## 四、字符串操作 ##
String类中包含了很多方法，允许程序员对字符串进行操作来满足实际编程中的需求。下面将介绍几种常用的字符串操作。

### 4.1 获取子字符串 ###
通过String类的substring()方法可对字符串进行截取。这些方法的共同点就是都利用字符串的下标进行截取，且应明确字符串下标是从0开始的。

substring()方法被两种不同的方法重载，来满足不同的需要。

(1) substring(int beginIndex): 从指定的索引位置开始截取知道该字符串结尾的子串。

(2) substring(int beginIndex, int endIndex): 从字符串某一索引位置开始截取至某一索引位置结束的子串。

### 4.2 去除空格 ###
trim()方法返回字符串的副本，忽略前导空格和尾部空格。

	str.trim()

实例：在项目中创建类Blak，在主方法中创建String对象，将字符串变量原来的长度与去掉前导和尾部空格后的长度输出。

	...

### 4.3 字符串替换 ###
replace()方法可实现将指定的字符或字符串替换成心得字符或字符串。

	str.replace(char oldChar, char newChar)

replace()方法返回的结果是一个新的字符串，如果字符串oldChar没有出现在该对象表达式中的字符串序列中，则将原字符串返回。

实例：在项目中创建类NewStr，在主方法中创建String型变量，将字符变量中的字母a替换成A后的结果输出。

	...

### 4.4 判断字符串的开始与结尾 ###
startsWith()方法与endsWith()方法分别用于判断字符串是否以指定的内容开始或结束。这两个方法的返回值都为boolean类型。

(1) startsWith()方法：用于判断当前字符串对象的前缀是否为参数指定的字符串。

	str.startsWith(String prefix)

(2) endsWith()方法：用于判断当前字符串是否为以给定的子字符串结束。
	
	str.endsWith(String suffix)

实例：在项目中创建类 StartOrEnd，在主方法中创建String型变量，并判断变量的前导和后置字符串。

	...

### 4.5 判断字符串是否相等 ###
对字符串对象进行比较不能简单地使用运算符“==”,因为比较运算符比较的是两个字符串的地址是否相等。即使两个字符串的内容相同，两个对象的内存地址也是不同的，使用比较运算符仍然会返回false。

	...

因此，要比较两个字符串内容是否相等，应使用equals()方法和equalsIgnoreCase()方法。

#### (1) equals()方法： ####
如果两个字符串具有相同的字符和长度，则使用equals()方法进行比较时，返回true。

	str.equals(String otherstr)

#### (2) equalsIgnoreCase()方法： ####
使用equals()方法对字符串进行比较时是区分大小写的，而使用equalsIgnoreCase()方法是在忽略了大小写的情况下比较两个字符串是否相等，返回结果仍未boolean类型。

	str.equalsIgnoreCase(String otherstr)

举例：在项目中创建类Opinion，在主方法中创建String型变量，实现判断两个字符串是否相等，并将结果输出。

	...

### 4.6 按字典顺序比较两个字符串 ###
compareTo()方法为按字典顺序比较两个字符串，该比较基于字符串中各个字符的unicode值，按字段顺序将此String对象表示的字符序列与参数字符串所表示的字符序列进行比较。如果按字典顺序此String对象位于参数字符串之前，则比较结果为一个负整数；如果按字段顺序此String对象位于参数字符串之后，则比较结果为一个正整数；如果这两个字符串相等，则结果为0。

	str.compareTo(String otherstr)

举例：在项目中创建类WordBook，在主方法中创建String变量，使用compareTo()方法将字符变量进行比较，并将比较结果输出。

	...

### 4.7 字母大小写转换 ###
字符串的toLowerCase()方法可将字符串中所有字符从大写字母改写为小写字母，而toUpperCase()方法可将字符串中的小写字母改写为大写字母。

(1) toLowerCase()方法：将String转换为小写。如果字符串中没有应该被转换的字符，则将原字符串返回；否则将返回一个新的字符串，将元字符串中的每个该进行小写转换的字符都转换成等价的小写字符。字符长度与原字符长度相同。

	str.toLowerCase()

(2) toUpperCase()方法：将String转换为大写。如果字符串中没有应该被转换的字符，则将原字符返回；否则返回一个新的字符串，将原字符串中每个该进行大写转换的字符都转换成等价的大写字符。新字符长度与原字符长度相同。

	str.toUpperCase()

举例：在项目中创建类UpAndLower，在主方法中创建String型变量，实现字符变量的大小写转换，并将转换后的结果输出。

	...

### 4.8 字符串分割 ###
使用split()方法可以使字符串按指定的分割字符或字符串对内容进行分割，并将分割后的结果存放在字符串数组中。split()方法提供了以下两种字符串分割形式。

(1) split(String sign)方法：可根据给定的分割符对字符串进行拆分。

(2) split(String sign, int limit)方法：可根据给定的分割符对字符串进行拆分，并限定拆分的次数。

其中，sign为分割字符串的分割符，也可以使用正则表达式。

> 说明：没有统一的对字符进行分割的符号。如果想定义多个分割符，可使用符号"|"，例如：",|="，表示分割符","和"="。

举例：在项目中创建类Division，在主方法中创建String型变量，并将字符变量进行分割，将分割后的结果输出。

	...

## 五、格式化字符串 ##
String类的静态format()方法用于创建格式化的字符串。format()方法有两种重载形式。

(1) format(String format, Object...args)

该方法使用指定的格式字符串和参数返回一个格式化字符串，格式化后的新字符串使用本地默认的语言环境。

	str.format(String format, Object..args)

(2) format(Local l, String format, Object...args)

### 5.1 日期和时间字符串格式化 ###
在应用程序设计中，经常需要显示时间和日期。如果输出满意的日期和时间格式，一般需要编写大量的代码经过各种算法才能实现。format()方法通过特殊转换符作为参数来实现对日期和时间的格式化。

#### (1) 日期格式化 ####
举例：返回一个月中的天数，实例代码如下：

	...

常用的日期格式化转换符：

<img src="">

实例：在项目中创建类Eval，实现将当前日期信息以4位年份、月份全称、2位日期形式输出。

	...

#### (2) 时间格式化 ####
时间格式化转换符：

<img src="">

实例：在项目中创建类GetDate，实现将当前时间信息以2位小时数，2位分钟数，2位秒数形式输出。

	...

#### (3) 格式化常见的日期时间组合 ####
常见的日期和时间组合的转换符：

<img src="">

实例：在项目中创建类DateAndTime，在主方法中实现将当前日期时间的全部信息以及制定格式的日期输出。

	...

### 5.2 常规类型格式化 ###
常规类型的格式化可应用于任何参数类型。

常规转换符：

<img src="">

实例：在项目中创建类General，在主方法中实现不同数据类型到字符串的转换。

	...

## 六、使用正则表达式 ##
正则表达式通常被用于判断语句中，用来检查某一字符串是否满足某一格式。正则表达式是含有一些特殊意义字符串的字符串，这些特殊字符称为正则表达式的元字符。例如："\\d"表示数字0-9中的任何一个，"\d"就是元字符。正则表达式中元字符及其意义如表所示：

<img src="">

限定修饰符：

<img src="">

在正则表达式中可以使用方括号括起若干个字符来表示一个元字符，该元字符可代表方括号中的任何一个字符。

实例：在项目中创建类Judge，在主方法中实现使用正则表达式来判断指定的变量是否为合法的Email地址。

	...

	"\\w+@\\w+(\\.\\w{2,3})*\\.\\w{2,3}"

## 七、字符串生成器 ##
创建成果的字符串对象，其长度是固定的，内容不能被改变和编译。虽然使用"+"，可以达到附加新字符或字符串的目的，但"+"会产生一个新的String实例，会在内存中创建新的字符串对象。如果重复地对字符串进行修改，将极大地增加系统开销。而J2SE5.0新增了可变的字符序列String Builder类，大大提高了频繁增加字符串的效率。

实例：在项目中创建类Jerque，在主方法中编写如下代码，验证字符串操作和字符串生成器操作的效率。

	...

利用StringBuilder类中的方法可动态地执行添加、删除和插入等字符串的编辑操作，该类的常用方法如下：

### (1) append() ###
### (2) insert(int offset, arg) ###
### (3) delete(int start, int end) ###

## 小结 ##
精通Java中的字符串处理技术是学习Java语言的必修课，本章向读者介绍了字符串的创建和连接方法，以及获取字符串信息、常用的字符串操作等。这些字符串的常规操作在实际编程中经常会遇到，因此必须熟练掌握。另外还介绍了一些高级的字符串处理技术，如格式化字符串、使用正则表达式和字符串生成器等，这些也是字符串处理技术的重点，读者应该熟练掌握。